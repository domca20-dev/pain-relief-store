{%- comment -%}
  Section 3: Product Hero ‚Äî Image Gallery (left) + Product Info (right)
  Above the fold. 90/10 rule: lead with transformation, support with specs.
{%- endcomment -%}

<div class="product-hero">
  <div class="product-hero__inner page-width">
    {%- comment -%} IMAGE GALLERY ‚Äî Left side on desktop, full width on mobile {%- endcomment -%}
    <div class="product-hero__gallery">
      <div class="product-hero__main-image">
        {%- if product.featured_image -%}
          <img
            src="{{ product.featured_image | image_url: width: 800 }}"
            alt="{{ product.featured_image.alt | escape }}"
            width="800"
            height="800"
            loading="eager"
          >
        {%- else -%}
          <div class="product-hero__placeholder">
            <span>[BRAND] Infrared Therapy Belt ‚Äî Hero Image</span>
          </div>
        {%- endif -%}
      </div>
      <div class="product-hero__thumbnails">
        {%- for image in product.images limit: 6 -%}
          <button class="product-hero__thumb{% if forloop.first %} product-hero__thumb--active{% endif %}" data-index="{{ forloop.index0 }}">
            <img src="{{ image | image_url: width: 120 }}" alt="{{ image.alt | escape }}" width="120" height="120" loading="lazy">
          </button>
        {%- endfor -%}
      </div>
    </div>

    {%- comment -%} PRODUCT INFO ‚Äî Right side on desktop, below gallery on mobile {%- endcomment -%}
    <div class="product-hero__info">
      <h1 class="product-hero__title">
        {{ product.title | default: '[BRAND]‚Ñ¢ Infrared Therapy Belt' }}
      </h1>

      {%- comment -%} Star rating + review count (Judge.me placeholder) {%- endcomment -%}
      <div class="product-hero__reviews">
        <div class="product-hero__stars" aria-label="4.8 out of 5 stars">
          <span class="star filled">‚òÖ</span>
          <span class="star filled">‚òÖ</span>
          <span class="star filled">‚òÖ</span>
          <span class="star filled">‚òÖ</span>
          <span class="star filled">‚òÖ</span>
        </div>
        <span class="product-hero__review-count">
          <span class="judge-me-review-count" data-product-id="{{ product.id }}">2,847+ Happy Customers</span>
        </span>
      </div>

      {%- comment -%} Price block {%- endcomment -%}
      <div class="product-hero__price">
        <span class="product-hero__price-current">$119.99</span>
        <span class="product-hero__price-compare">$249.99</span>
        <span class="product-hero__price-badge">SAVE $130</span>
      </div>

      {%- comment -%} 3 benefit bullets ‚Äî transformation-first (90/10) {%- endcomment -%}
      <ul class="product-hero__benefits">
        <li class="product-hero__benefit">
          <svg class="benefit-check" width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="10" fill="#2ecc71"/><path d="M6 10l3 3 5-5" stroke="#fff" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span><strong>Reaches 8mm deep</strong> ‚Äî where chronic pain actually lives, not just the surface</span>
        </li>
        <li class="product-hero__benefit">
          <svg class="benefit-check" width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="10" fill="#2ecc71"/><path d="M6 10l3 3 5-5" stroke="#fff" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span><strong>No pills, no fog, no side effects</strong> ‚Äî works alongside your existing routine</span>
        </li>
        <li class="product-hero__benefit">
          <svg class="benefit-check" width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="10" fill="#2ecc71"/><path d="M6 10l3 3 5-5" stroke="#fff" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span><strong>Less than a single PT session</strong> ‚Äî the same technology 4,000+ clinics charge $200/visit for</span>
        </li>
      </ul>

      {%- comment -%} Low stock urgency badge {%- endcomment -%}
      <div class="product-hero__urgency">
        <span class="urgency-dot"></span>
        <span>{{ section.settings.urgency_text | default: 'High Demand ‚Äî Only a few left at this price' }}</span>
      </div>

      {%- comment -%} Add to Cart {%- endcomment -%}
      <form method="post" action="/cart/add" class="product-hero__form">
        <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
        <input type="hidden" name="quantity" value="1">
        <button type="submit" class="product-hero__atc-btn" {% unless product.available %}disabled{% endunless %}>
          {%- if product.available -%}
            Add to Cart ‚Äî $119.99
          {%- else -%}
            Sold Out
          {%- endif -%}
        </button>
      </form>

      {%- comment -%} Trust badges below ATC {%- endcomment -%}
      <div class="product-hero__atc-trust">
        <div class="atc-trust-item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#2ecc71" stroke-width="2"><rect x="1" y="6" width="22" height="14" rx="2"/><path d="M1 10h22"/></svg>
          <span>Free Shipping</span>
        </div>
        <div class="atc-trust-item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#2ecc71" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
          <span>60-Day Guarantee</span>
        </div>
        <div class="atc-trust-item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#2ecc71" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          <span>Secure Checkout</span>
        </div>
      </div>

      {%- comment -%} Free gift callout {%- endcomment -%}
      <div class="product-hero__free-gift">
        <span class="free-gift-icon">üéÅ</span>
        <span>{{ section.settings.free_gift_text | default: 'FREE Pain Relief Recovery Guide included with every order' }}</span>
      </div>
    </div>
  </div>
</div>

{%- comment -%} Sticky ATC for mobile {%- endcomment -%}
<div class="sticky-atc" id="stickyAtc">
  <div class="sticky-atc__inner">
    <div class="sticky-atc__info">
      <span class="sticky-atc__title">[BRAND]‚Ñ¢ Infrared Belt</span>
      <span class="sticky-atc__price">$119.99</span>
    </div>
    <form method="post" action="/cart/add">
      <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
      <input type="hidden" name="quantity" value="1">
      <button type="submit" class="sticky-atc__btn">Add to Cart</button>
    </form>
  </div>
</div>

<script>
  // Sticky ATC visibility on scroll (mobile)
  (function() {
    var sticky = document.getElementById('stickyAtc');
    var hero = document.querySelector('.product-hero__atc-btn');
    if (!sticky || !hero) return;
    var observer = new IntersectionObserver(function(entries) {
      entries.forEach(function(entry) {
        sticky.classList.toggle('sticky-atc--visible', !entry.isIntersecting);
      });
    }, { threshold: 0 });
    observer.observe(hero);
  })();
</script>

{% schema %}
{
  "name": "Product Hero",
  "tag": "section",
  "class": "product-hero-section",
  "settings": [
    {
      "type": "text",
      "id": "urgency_text",
      "label": "Urgency badge text",
      "default": "High Demand ‚Äî Only a few left at this price"
    },
    {
      "type": "text",
      "id": "free_gift_text",
      "label": "Free gift text",
      "default": "FREE Recovery Guide with your order today!"
    }
  ],
  "presets": [
    {
      "name": "Product Hero"
    }
  ]
}
{% endschema %}
